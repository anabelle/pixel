<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pixel Ecosystem Data Flow</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        :root {
            --bg-primary: #0d1117;
            --bg-secondary: #161b22;
            --text-primary: #e6edf3;
            --text-secondary: #8b949e;
            --accent-blue: #58a6ff;
            --accent-green: #3fb950;
            --accent-yellow: #d29922;
            --accent-red: #f85149;
            --accent-purple: #a371f7;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            padding: 2rem;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .subtitle {
            text-align: center;
            color: var(--text-secondary);
            margin-bottom: 2rem;
        }
        
        .diagram-container {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid #30363d;
        }
        
        .diagram-title {
            color: var(--accent-blue);
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .stat-card {
            background: var(--bg-secondary);
            border-radius: 8px;
            padding: 1.5rem;
            border: 1px solid #30363d;
            text-align: center;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }
        
        .stat-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        .green { color: var(--accent-green); }
        .yellow { color: var(--accent-yellow); }
        .blue { color: var(--accent-blue); }
        .red { color: var(--accent-red); }
        .purple { color: var(--accent-purple); }
        
        .mermaid {
            display: flex;
            justify-content: center;
        }
    </style>
</head>
<body>
    <h1>üó∫Ô∏è Pixel Ecosystem Data Flow</h1>
    <p class="subtitle">Generated: 2026-01-04 | Complete system visualization</p>
    
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-value green">37</div>
            <div class="stat-label">Refactoring Tasks Complete</div>
        </div>
        <div class="stat-card">
            <div class="stat-value blue">18</div>
            <div class="stat-label">Ideas in Garden</div>
        </div>
        <div class="stat-card">
            <div class="stat-value yellow">25.0</div>
            <div class="stat-label">Current Cycle</div>
        </div>
        <div class="stat-card">
            <div class="stat-value purple">14/14</div>
            <div class="stat-label">Containers Healthy</div>
        </div>
    </div>
    
    <div class="diagram-container">
        <h3 class="diagram-title">üìä Main Data Flow Architecture</h3>
        <div class="mermaid">
flowchart TB
    subgraph Human["üë§ Human Layer"]
        HI[Human Inbox<br/>CONTINUITY.md]
        HD[Directives]
    end
    
    subgraph Syntropy["üß† Syntropy Layer (Oversoul)"]
        CE[Cycle Engine<br/>7 Phases]
        CE --> P1[Phase 1: Context]
        CE --> P2[Phase 2: Audit]
        CE --> P3[Phase 3: Execute]
        CE --> P4[Phase 4: Learn]
        CE --> P5[Phase 5: Refactor]
        CE --> P6[Phase 6: Narrate]
        CE --> P7[Phase 7: Schedule]
    end
    
    subgraph Agent["ü§ñ Agent Layer (Pixel)"]
        NA[Nostr Actions]
        SA[Social Posts]
    end
    
    subgraph DataStores["üìÅ Data Stores"]
        CONT[CONTINUITY.md<br/>370 lines]
        IDEAS[IDEAS.md<br/>18 seeds]
        QUEUE[REFACTOR_QUEUE.md<br/>0 active]
        ARCHIVE[REFACTOR_ARCHIVE.md<br/>39 tasks]
        LEDGER[task-ledger.json<br/>144KB]
        SCHED[syntropy-schedule.json]
    end
    
    subgraph External["üåê External Systems"]
        NOSTR[Nostr Relays]
        BTC[Bitcoin Node]
        LN[Lightning Node]
        PG[PostgreSQL]
    end
    
    HD --> HI
    HI --> CE
    CE --> CONT
    CE --> IDEAS
    CE --> QUEUE
    QUEUE --> ARCHIVE
    CE --> LEDGER
    P7 --> SCHED
    
    CE --> NA
    NA --> NOSTR
    
    CE --> BTC
    CE --> LN
    CE --> PG
        </div>
    </div>
    
    <div class="diagram-container">
        <h3 class="diagram-title">üå± Idea Lifecycle Flow</h3>
        <div class="mermaid">
flowchart LR
    subgraph Plant["üå± Plant"]
        A[Human/Syntropy<br/>plants idea]
    end
    
    subgraph Grow["üåø Grow"]
        B[Seed<br/>0-2 waterings]
        C[Sprouting<br/>3-4 waterings]
        D[Ready<br/>5+ waterings]
    end
    
    subgraph Harvest["üå∏ Harvest"]
        E[Convert to<br/>Refactor Task]
    end
    
    subgraph Complete["‚úÖ Complete"]
        F[Execute via<br/>Worker]
        G[Archive<br/>Task]
    end
    
    A --> B
    B -->|water| C
    C -->|water| D
    D -->|harvest| E
    E --> F
    F --> G
    
    style B fill:#22c55e,color:#000
    style C fill:#eab308,color:#000
    style D fill:#f97316,color:#000
    style G fill:#3b82f6,color:#fff
        </div>
    </div>
    
    <div class="diagram-container">
        <h3 class="diagram-title">üîÑ Refactoring Queue Flow</h3>
        <div class="mermaid">
flowchart TB
    subgraph Analyze["üîç Analyze"]
        A1[analyzeForRefactoring]
        A2[Scan codebase]
        A3[Generate suggestions]
    end
    
    subgraph Add["‚ûï Add"]
        B1[addRefactorTask]
        B2[REFACTOR_QUEUE.md<br/>‚¨ú READY]
    end
    
    subgraph Process["‚öôÔ∏è Process"]
        C1[processRefactorQueue<br/>action=check]
        C2[Check archive sync]
        C3[Find next task]
    end
    
    subgraph Execute["üöÄ Execute"]
        D1[processRefactorQueue<br/>action=execute]
        D2[spawnWorker]
        D3[Docker container]
    end
    
    subgraph Complete["‚úÖ Complete"]
        E1[Worker finishes]
        E2[Update queue<br/>‚úÖ DONE]
        E3[verifyQueueArchiveSync]
        E4[REFACTOR_ARCHIVE.md]
    end
    
    A1 --> A2 --> A3
    A3 --> B1 --> B2
    B2 --> C1 --> C2 --> C3
    C3 --> D1 --> D2 --> D3
    D3 --> E1 --> E2 --> E3 --> E4
    
    style B2 fill:#22c55e,color:#000
    style E2 fill:#3b82f6,color:#fff
    style E4 fill:#a855f7,color:#fff
        </div>
    </div>
    
    <div class="diagram-container">
        <h3 class="diagram-title">üß† Syntropy 7-Phase Cycle</h3>
        <div class="mermaid">
flowchart LR
    P1["1Ô∏è‚É£ Context<br/>Load state"]
    P2["2Ô∏è‚É£ Audit<br/>Check health"]
    P3["3Ô∏è‚É£ Execute<br/>Run tasks"]
    P4["4Ô∏è‚É£ Learn<br/>Update docs"]
    P5["5Ô∏è‚É£ Refactor<br/>Improve code"]
    P6["6Ô∏è‚É£ Narrate<br/>Tell story"]
    P7["7Ô∏è‚É£ Schedule<br/>Next cycle"]
    
    P1 --> P2 --> P3 --> P4 --> P5 --> P6 --> P7
    P7 -.->|next cycle| P1
    
    style P1 fill:#3b82f6,color:#fff
    style P2 fill:#22c55e,color:#000
    style P3 fill:#f97316,color:#000
    style P4 fill:#eab308,color:#000
    style P5 fill:#a855f7,color:#fff
    style P6 fill:#ec4899,color:#fff
    style P7 fill:#06b6d4,color:#000
        </div>
    </div>
    
    <div class="diagram-container">
        <h3 class="diagram-title">üîó Tool Dependencies</h3>
        <div class="mermaid">
graph TD
    subgraph Core["Core Tools"]
        CT[continuityTools]
        RT[refactoringTools]
        IT[ideationTools]
    end
    
    subgraph Ecosystem["Ecosystem Tools"]
        ET[ecosystemTools]
        UT[utilityTools]
    end
    
    subgraph Social["Social Tools"]
        NT[nostrTools]
        MT[memoryTools]
        CHT[characterTools]
    end
    
    subgraph Worker["Worker System"]
        WT[workerTools]
        DT[diaryTools]
    end
    
    CT --> CONT[CONTINUITY.md]
    RT --> QUEUE[REFACTOR_QUEUE.md]
    RT --> ARCH[REFACTOR_ARCHIVE.md]
    IT --> IDEAS[IDEAS.md]
    
    ET --> Docker[Docker API]
    ET --> VPS[VPS Metrics]
    
    NT --> Nostr[Nostr Relays]
    MT --> PG[PostgreSQL]
    CHT --> Files[Character Files]
    
    WT --> Containers[Worker Containers]
    DT --> PG
    
    RT --> WT
        </div>
    </div>

    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'dark',
            themeVariables: {
                primaryColor: '#58a6ff',
                primaryTextColor: '#e6edf3',
                primaryBorderColor: '#30363d',
                lineColor: '#8b949e',
                secondaryColor: '#161b22',
                tertiaryColor: '#0d1117'
            }
        });
    </script>
</body>
</html>
